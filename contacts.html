<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name = "description" content="This is a website for assignment 2 for CS20">
        <meta name = "author" content="Victoria Y. Chen, Willy (Wo Wei) Lin, Yiyi Wang, Sara Siqueira">
        <meta name = "viewport" content="width=device-width, initial-scale =1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">

        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap" rel="stylesheet">

      
        <title>Catfé - Contact</title>
        <link href="stylesheet.css" type="text/css" rel="stylesheet" />

        <style> 


            h1 {
                padding-top: 40px;
                text-align: center;
                font-family: 'Playfair Display', serif;
                padding-bottom: 20px;
                
            }

            h2 { 
                text-align: center;
                padding-bottom: 20px;

             }

            p {
                padding-top: 10px;
                padding-left: 30px;
            }

            h3 {
                letter-spacing: 1px;
                text-align: center;
                font-weight: normal;

            } 
            h4 {
                letter-spacing: 1px;
                text-align: center;
                font-weight: normal;

            }   
           
            .block {
                display: inline-block;
                text-align: center;
                padding-right: 15px;
                padding-left: 15px;
            }

            .block2 {
                text-align: center;
                padding-top: 5px;
            }

            .content {
                text-align: center;
                margin-bottom: 70px;


            }

            .form {
                display: flex;
                justify-content: center;
                margin-top: 60px;
                margin-bottom: 60px;
                background-color: #FAF3EB;
                margin: 50px auto 30px auto;
                width: 60%;
                padding-top: 30px;
                padding-bottom: 30px;
                border-radius: 2em;
                border: 5px solid #fff; 
                box-shadow: 0 0 0 2pt #FAF3EB;
                font-family: 'Playfair Display', serif;

            }

            .events {
                padding-left: 60px;
                line-height: 25px;
            }

            .submit {
                text-align: center;

            }

            .button{font-family: 'Playfair Display', serif; color: #B5926D; background-color: #FAF3EB; 
            font-size: 15px; padding: 5px; border-radius: 6px; border: 1px solid#B5926D; 
            width: 160px; text-align: center; float: center;}

            .button:hover{color:#fff; background-color:#C8AB8D; border: 1px;}

            #time_slot_radio {
                margin-right: 30px;
                text-align: center;
            }

            .slots {
                padding-right: 30px;
                line-height: 30px;
            }


        </style>
    </head>
    <body>
        <nav>
          <div class="logo">    
            <a href="index.html"><img src="images/full_logo.jpg" alt="logo"></a>   
          </div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="services.html">Services</a></li>
                <li><a href="menu.html">Menu</a></li>
                <li><a href="events.html">Events</a></li>
                <li><a href="cats.html">Our Cats</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contacts.html">Reservations</a></li>

            </ul>
            <div class="burger">
                <div class="line1"></div>
                <div class="line2"></div>
                <div class="line3"></div>
            </div>

        </nav>
    <div class = "form">
        <form name = "reserve" onsubmit = "return validateForm()">
            <h2> Make a reservation </h2>
            <p>Name*: <input type="TEXT" name = "name" size="20" maxlength="99" /></p>
            <p>Email*: <input type="TEXT" name = "email" size="30" maxlength="99" /></p>
            <p>Phone number*: <input type="TEXT" name = "phone" size="20" maxlength="99" /></p>
            <p>Size of party*: 
            <select name = "size">
                <option value = "1">1</option>
                <option value = "2">2</option>
                <option value = "3">3</option>
                <option value = "4">4</option>
            </select></p>
            <p style = "padding-bottom: 5px"> Choose an event*: 
            <select id = "selectEvents" onchange="showTimeSlots();"> </select> </p>
            <div id="time_slot_selection" style="display: none; text-align: center;">
            </div>
            <!-- <table border="0" cellpadding="3">
                <tr>
                    <th>Select Item</th>
                    <th>Item Name</th>
                    <th>Cost Each</th>
                    <th>Total Cost</th>
                </tr> -->
                <!-- <script language="javascript">
                    var s = "";
                    for (i = 0; i < events.length; i++) {
                        s += "<tr><td>";
                        s += makeSelect("quan" + i, 0, 10);
                        s += "</td><td>" + menuItems[i].name + "</td>";
                        s += "<td> $ " + menuItems[i].cost.toFixed(2) + "</td>";
                        s += "<td>$<input type='text' name='cost'/></td></tr>";
                    }
                    document.writeln(s);
                </script> -->
            <!-- </table> -->
        
            <p>Day (MM/DD/YYYY): <input type="TEXT" name = "day" size="15" maxlength="99" /></p>


            <br/>
            <div class = "submit">
                <input type="submit" class = "button" value="Submit"/>
                <input type="reset" class = "button" value="Clear Form" onclick = "return validateForm()"/>

                <h4 id = "thank"></h4>
            </div>
        </form>
    </div>
    <div class = "content">
        <h1>CONTACT US</h1>
        <div class = "block">
            <h3> (510) 501-2274 </h3>
        </div>
        <div class = "block">
            <h3> info@catfé.com </h3>
        </div>
        <div class = "block2">
            <h3> Located in the Cummings Center </h3>
        </div>
    </div>

        <script src="nav.js"></script>

        <script language = "javascript">
            // function that hides timeslot buttons on load 


            function events(name,day,start_time, end_time){
                this.name = name;
                this.day = day; 
                this.start_time = start_time;
                this.end_time = end_time;

            }
                
            newEvents = new Array(
                new events("Cookie Fiesta", "Sunday", 15, 19),
                new events("Catfé Brewing", "Wednesday", 14, 17),
                new events("Cat Backing", "Monday", 15, 17),
                new events("Movie Night", "Friday", 20, 22),
                new events("Gaming Club", "Saturday", 21, 23),
                new events("Latte Cat Art", "Sunday", 10, 11), 
                new events("Kitten Greet and Meet", "Friday", 14, 17),
                new events("General Visit", "Monday",9, 17)
                // if user selects general visit, then the calendar comes up 
            );

            function selectEvents(events_arr) {
                // <option value="audi" selected>Audi</option>
                var events_str = "<option class='event_option' name='default' selected>--</option>";
                for (var i = 0; i < events_arr.length; i++) {
                    events_str += "<option class='event_option' value=" + events_arr[i].name + ">" + events_arr[i].name + "</option>"; 

                } 
                document.getElementById("selectEvents").innerHTML = events_str;
            }
                
            // FUNCTION: 
            // display radio buttons for timeslots specific to event selected 
            //


            function validateForm() {
                // use javascript array for events list 
                var name = document.forms["reserve"]["name"].value;
                var phone = document.forms["reserve"]["phone"].value;
                var email = document.forms["reserve"]["email"].value;
                var day = document.forms["reserve"]["day"].value;

                // if didn't enter last name, alert
                if (name == "") {
                    alert("Please enter your name.");
                    document.forms["reserve"]["name"].focus();
                    return false;                  
                }

                if (email == "") {
                    alert("Please enter your email address.");
                    document.forms["reserve"]["email"].focus();
                    return false;
                }
            
                if (!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(reserve.email.value))
                {
                    alert("You have entered an invalid email address!")
                    document.forms["reserve"]["email"].focus();
                    return false;
                } 
                // if the phone number is not valid, display an alert
                var phoneNumber = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/
                if (phone == "" || !phone.match(phoneNumber)){
                alert("Please enter a valid phone number.");
                document.forms["reserve"]["phone"].focus();
                return false;
                }

                // if no event is selected, display an alert
                if (document.getElementsByClassName("event_option")[0].selected) {
                    alert("Please choose an event");
                    return false;
                }

                // ensure at least one time slot is selected 


                // display the confirmation of their reservation 
                displayMessage();
                return true;

            }

            // FUNCTION: 
            // send email with 

            function displayMessage() {
                var message = "Thank you for making a reservation! We look forward to seeing you soon.";
                document.getElementById("thank").innerHTML = message;

            }

            function showDate() {

            }

            function showTimeSlots() {
                // find which one is selected
                var selected_index = -1;
                const arr = document.getElementsByClassName("event_option");
                for (var i = 0; i < arr.length; i++) {
                    if (arr[i].selected) {
                        selected_index = i;
                    }
                }
                var start_time;
                var end_time;
                if (selected_index > 0) {
                    // add data for that index from new events
                    start_time = newEvents[selected_index-1].start_time;
                    end_time = newEvents[selected_index-1].end_time;
                    day = newEvents[selected_index-1].day;
                } else if (selected_index == -1) {
                    alert("Error in showTimeSlots");
                } else {
                    document.getElementById("time_slot_selection").style.display = "none";
                    return;
                }

                // <input type="radio" id="put UID here">00:00
                // make time slots
                new_html = "";
                for (var i = start_time; i < end_time; i++) {
                    new_html += "<div class='slots'><input type='radio' id=" + i + " name='slot'>" + day + "  " + i + ":00 -- " + (i + 1) + ":00</div>";
                }
                document.getElementById("time_slot_selection").innerHTML = new_html;

                // set visibility to block
                document.getElementById("time_slot_selection").style.display = "block";
            }


            // returns whether or not the default is selected
            function isDefault() {
                return document.getElementsByClassName("event_option")[0].selected;
            }

            window.onload = function() {
                selectEvents(newEvents);
                isDefault();
            }



        </script>
        
        <!-- add code here -->
        
        <footer>
          <a href="index.html"><img src="images/catfeLogo.png" alt="Catfé Logo" id="logo"/>
          <div class="name">Catfé</div></a>
          <br>&copy; 2021 Catfé All Rights Reserved We Hope
        <footer>
    </body>
    

</html>
